#include <SoftwareSerial.h>

SoftwareSerial gsm(10, 11); // RX, TX

// PIR sensor connected to pin 2
const int pirPin = 2;
int pirState = LOW;
int val = 0;

void setup() {
  pinMode(pirPin, INPUT);
  gsm.begin(9600);
  Serial.begin(9600);
  delay(1000);

  // Initialize GSM
  gsm.println("AT");
  delay(1000);
  gsm.println("AT+CMGF=1"); // Set SMS mode
  delay(1000);
}

void loop() {
  val = digitalRead(pirPin);

  if (val == HIGH && pirState == LOW) {
    Serial.println("Motion detected!");
    sendSMS();
    pirState = HIGH;
  } else if (val == LOW && pirState == HIGH) {
    Serial.println("Motion ended.");
    pirState = LOW;
  }

  delay(500);
}

void sendSMS() {
  gsm.println("AT+CMGS=\"+911234567890\""); // Replace with your phone number
  delay(1000);
  gsm.println("Alert! Motion detected â€“ possible theft!");
  delay(100);
  gsm.write(26); // Ctrl+Z to send SMS
  delay(1000);
}
